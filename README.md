# ü©∫ medscreen
**MedScreen** ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö —Ç–æ–º–æ–≥—Ä–∞—Ñ–∏–π –æ—Ä–≥–∞–Ω–æ–≤ –≥—Ä—É–¥–Ω–æ–π –∫–ª–µ—Ç–∫–∏ —Å —Ü–µ–ª—å—é –≤—ã—è–≤–ª–µ–Ω–∏—è **–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –±–µ–∑ –ø–∞—Ç–æ–ª–æ–≥–∏–π**.  
–†–µ—à–µ–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –≤—Ä–∞—á–µ–π-—Ä–∞–¥–∏–æ–ª–æ–≥–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–±–∏—Ä–∞—è –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –ö–¢, —á—Ç–æ–±—ã –≤—Ä–∞—á–∏ –º–æ–≥–ª–∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ —Å–ª—É—á–∞—è—Ö —Å –≤–æ–∑–º–æ–∂–Ω—ã–º–∏ –∞–Ω–æ–º–∞–ª–∏—è–º–∏.  
–í –æ—Å–Ω–æ–≤–µ ‚Äî –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–∞—è LLM **MedGemma-4b-it**, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.


## üíª –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **GPU:** NVIDIA —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CUDA (–º–∏–Ω–∏–º—É–º 8GB VRAM)
- **RAM:** 16GB —Å–∏—Å—Ç–µ–º–Ω–æ–π –ø–∞–º—è—Ç–∏
- **–î–∏—Å–∫:** 20GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ (–¥–ª—è –º–æ–¥–µ–ª–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
- **–û–°:** Linux —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Docker –∏ nvidia-container-toolkit

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **GPU:** NVIDIA RTX 3080/4080 –∏–ª–∏ –≤—ã—à–µ (12GB+ VRAM)
- **RAM:** 32GB —Å–∏—Å—Ç–µ–º–Ω–æ–π –ø–∞–º—è—Ç–∏
- **CPU:** 8+ —è–¥–µ—Ä


## üöÄ Quick Start

### Online Demo
–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å –º–æ–∂–Ω–æ –∑–¥–µ—Å—å:  
üëâ [–ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–Ω–ª–∞–π–Ω](https://d75658572430f4f78b2972d1c74f592ca.clg07azjl.paperspacegradient.com)  

> ‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –û–Ω–ª–∞–π–Ω-–¥–µ–º–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è REST API –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å–µ—Ä–≤–∏—Å –ª–æ–∫–∞–ª—å–Ω–æ.

### Local Setup

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```sh
    git clone https://github.com/AlekseiLugovoi/medscreen.git
    cd medscreen
    ```

2.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤):**

    <details>
        <summary>–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</summary>

    ```sh
    # –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
    # –ó–∞–º–µ–Ω–∏—Ç–µ ... –≤–∞—à–∏–º —Ç–æ–∫–µ–Ω–æ–º –æ—Ç Hugging Face
    # –∏–ª–∏ –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –Ω–∞—à–∏–º: hf _nNvENhqrQTVFgRxSGUUpYNudvpEgQaNOWZ –¥–ª—è —Ä–∞–±–æ—Ç—ã –º–æ–¥–µ–ª–µ–π —Å hf
    echo "HF_TOKEN=hf_..." > .env
    ```

    ```sh
    # –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
    docker compose up --build
    ```
    –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å—Ç–∏—Ç –¥–≤–∞ —Å–µ—Ä–≤–∏—Å–∞:
    - **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** `http://localhost:8501`
    - **REST API:** `http://localhost:8502` (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger: `http://localhost:8502/docs`)

    </details>

    <details>
        <summary>–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)</summary>

    –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–µ–∑ Docker –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–≤–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.

    **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
    ```sh
    # –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
    conda create -n medscreen python=3.11 --yes
    conda activate medscreen

    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
    pip install -r requirements.txt
    
    # –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
    echo "HF_TOKEN=hf_..." > .env
    ```
    
    **–¢–µ—Ä–º–∏–Ω–∞–ª 1: –ó–∞–ø—É—Å–∫ REST API**
    ```sh
    # –ó–∞–ø—É—Å–∫–∞–µ–º –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
    uvicorn app.api:app --host 0.0.0.0 --port 8502
    ```

    **–¢–µ—Ä–º–∏–Ω–∞–ª 2: –ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**
    ```sh
    # –£–∫–∞–∑—ã–≤–∞–µ–º URL –¥–ª—è API, —á—Ç–æ–±—ã Streamlit –∑–Ω–∞–ª, –∫—É–¥–∞ –æ–±—Ä–∞—â–∞—Ç—å—Å—è
    export API_URL="http://localhost:8502"
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
    streamlit run app/main.py --server.port 8501
    ```

    - **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8501`
    - **REST API** –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8502`

    </details>

3.  **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å:**
    –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [**–¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ**](https://disk.yandex.ru/d/2ddI6aLMkoIYrA). \
    –í—ã –º–æ–∂–µ—Ç–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —Å–µ—Ä–≤–∏—Å–æ–º –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:

    <details>
    <summary>–í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</summary>

    –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:8501` –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç:
    - **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å** –æ–¥–Ω–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ "–ü—Ä–µ–≤—å—é".
    - **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π** –∏ —Å–∫–∞—á–∏–≤–∞—Ç—å CSV-–æ—Ç—á–µ—Ç –≤ —Ä–µ–∂–∏–º–µ "–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞".
    
    </details>

    <details>
    <summary>–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ REST API</summary>

    API –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.
    - **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger):** `http://localhost:8502/docs`

    **–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
    –û—Ç–ø—Ä–∞–≤—å—Ç–µ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ ZIP-–∞—Ä—Ö–∏–≤–æ–≤ –Ω–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/v1/upload`. –°–µ—Ä–≤–∏—Å –≤–µ—Ä–Ω–µ—Ç CSV-—Ñ–∞–π–ª —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏.

    ```bash
    # –ü—Ä–∏–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–≤—É—Ö –∞—Ä—Ö–∏–≤–æ–≤ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ report.csv
    curl -X POST "http://localhost:8502/api/v1/upload" \
         -H "Content-Type: multipart/form-data" \
         -F "files=@/–ø—É—Ç—å/–∫/–≤–∞—à–µ–º—É/study1.zip" \
         -F "files=@/–ø—É—Ç—å/–∫/–≤–∞—à–µ–º—É/study2.zip" \
         --output report.csv
    ```
    </details>


## üì• –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

–î–µ–º–æ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞: [link](https://disk.yandex.ru/d/2ddI6aLMkoIYrA) \
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö:

</details>

<details>
    <summary>–°–µ—Ä–∏—è DICOM-—Ñ–∞–π–ª–æ–≤ –≤ ZIP-–∞—Ä—Ö–∏–≤–µ</summary>

*   **–û–ø–∏—Å–∞–Ω–∏–µ:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏–π —Å–ª—É—á–∞–π, –∫–æ–≥–¥–∞ –∫–∞–∂–¥—ã–π —Å—Ä–µ–∑ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–º `.dcm` —Ñ–∞–π–ª–æ–º. –í—Å–µ —Ñ–∞–π–ª—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–ø–∞–∫–æ–≤–∞–Ω—ã –≤ –æ–¥–∏–Ω `.zip` –∞—Ä—Ö–∏–≤.
*   **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
    ```
    –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ.zip
    ‚îú‚îÄ‚îÄ slice-001.dcm
    ‚îú‚îÄ‚îÄ slice-002.dcm
    ‚îî‚îÄ‚îÄ ...
    ```

</details>

<details>
    <summary>–ú–Ω–æ–≥–æ–∫–∞–¥—Ä–æ–≤—ã–π (Multi-frame) DICOM</summary>

*   **–û–ø–∏—Å–∞–Ω–∏–µ:** –†–µ–¥–∫–∏–π —Å–ª—É—á–∞–π, –∫–æ–≥–¥–∞ –≤—Å–µ —Å—Ä–µ–∑—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –≤ –æ–¥–Ω–æ–º `.dcm` —Ñ–∞–π–ª–µ.
*   **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
    ```
    –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ.dcm
    ```

</details>

<details>
    <summary>NIfTI (Neuroimaging Informatics Technology Initiative)</summary>

*   **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ø—É–ª—è—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤ –Ω–∞—É—á–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–∞–∫ —Å–∂–∞—Ç—ã–µ (`.nii.gz`), —Ç–∞–∫ –∏ –Ω–µ—Å–∂–∞—Ç—ã–µ (`.nii`) —Ñ–∞–π–ª—ã.
*   **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
    ```
    –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ.nii.gz
    ```
    *–∏–ª–∏*
    ```
    –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ.nii
    ```
</details>


## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ app/                 # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ (Streamlit + FastAPI)
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ api.py           # –ö–æ–¥ FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ main.py          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ Streamlit
‚îÇ   ‚îú‚îÄ‚îÄ pages.py         # –õ–æ–≥–∏–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü Streamlit
‚îÇ   ‚îú‚îÄ‚îÄ ml_inference.py  # –õ–æ–≥–∏–∫–∞ ML-–º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ ...              # –î—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏
‚îú‚îÄ‚îÄ .env                 # –§–∞–π–ª —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ (HF_TOKEN)
‚îú‚îÄ‚îÄ docker-compose.yml   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker Compose
‚îú‚îÄ‚îÄ Dockerfile           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker-–æ–±—Ä–∞–∑–∞
‚îî‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
```

## üîó –°—Å—ã–ª–∫–∏

- **–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –ü—Ä–æ–µ–∫—Ç–∞:** https://disk.yandex.ru/d/LpKu44Kq0Xa_0w
- **–û–Ω–ª–∞–π–Ω —Å–µ—Ä–≤–∏—Å:** https://d75658572430f4f78b2972d1c74f592ca.clg07azjl.paperspacegradient.com
